<?xml version="1.0" encoding="UTF-8" ?>
<class name="WhisperFull" inherits="RefCounted" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="../class.xsd">
	<brief_description>
		Core wrapper for the whisper.cpp inference context and parameters.
	</brief_description>
	<description>
		This class provides the main interface to the whisper.cpp library for speech recognition. It holds the inference parameters, manages the whispered context, and exposes functions to transcribe audio data.
		It must be initialized with a [WhisperModel] resource by calling [method init] before any transcriptions can be performed. The transcription methods expect audio samples as 16kHz mono PCM float arrays.
	</description>
	<tutorials>
	</tutorials>
	<methods>
		<method name="convert_stereo_to_mono_16khz" qualifiers="static">
			<return type="PackedFloat32Array" />
			<param index="0" name="from_sample_rate" type="int" />
			<param index="1" name="samples" type="PackedVector2Array" />
			<description>
				Utility method to convert a stereo 2D audio array (typical of Godot's audio capture) into the 16kHz mono float structure required by Whisper. You must provide the original [param from_sample_rate] of the target audio bus.
			</description>
		</method>
		<method name="free_context">
			<return type="void" />
			<description>
				Manually frees the loaded whisper.cpp model context, releasing resources allocated by [method init].
			</description>
		</method>
		<method name="get_all_segments" qualifiers="const">
			<return type="WhisperSegment[]" />
			<description>
				Returns an array of all [WhisperSegment] objects generated by the last transcription.
			</description>
		</method>
		<method name="get_detected_lang_id" qualifiers="const">
			<return type="int" />
			<description>
				Returns the internal ID of the language that was detected during the last transcription, if [member detect_language] was enabled.
			</description>
		</method>
		<method name="get_detected_language" qualifiers="const">
			<return type="String" />
			<description>
				Returns the short string identifier (e.g. "en") of the language that was detected during the last transcription, if [member detect_language] was enabled.
			</description>
		</method>
		<method name="get_full_text" qualifiers="const">
			<return type="String" />
			<description>
				Returns the complete concatenated text string from all generated whisper segments of the last transcription.
			</description>
		</method>
		<method name="get_lang_id" qualifiers="static">
			<return type="int" />
			<param index="0" name="lang" type="String" />
			<description>
				Gets the numerical ID for a given language short string identifier [param lang].
			</description>
		</method>
		<method name="get_lang_max_id" qualifiers="static">
			<return type="int" />
			<description>
				Gets the maximum number of supported language IDs available in whisper.cpp.
			</description>
		</method>
		<method name="get_lang_str" qualifiers="static">
			<return type="String" />
			<param index="0" name="id" type="int" />
			<description>
				Gets the short string code (like "en", "fr") for the given language internal [param id].
			</description>
		</method>
		<method name="get_lang_str_full" qualifiers="static">
			<return type="String" />
			<param index="0" name="id" type="int" />
			<description>
				Gets the full human-readable name of the language corresponding to the given internal [param id].
			</description>
		</method>
		<method name="get_model_ftype" qualifiers="const">
			<return type="int" />
			<description>
				Returns the ftype (compute type format) of the loaded inference model.
			</description>
		</method>
		<method name="get_model_n_audio_ctx" qualifiers="const">
			<return type="int" />
			<description>
				Gets the model's audio context value.
			</description>
		</method>
		<method name="get_model_n_audio_head" qualifiers="const">
			<return type="int" />
			<description>
				Gets the number of audio heads in the model.
			</description>
		</method>
		<method name="get_model_n_audio_layer" qualifiers="const">
			<return type="int" />
			<description>
				Gets the number of audio layers in the model.
			</description>
		</method>
		<method name="get_model_n_audio_state" qualifiers="const">
			<return type="int" />
			<description>
				Gets the number of audio states in the model.
			</description>
		</method>
		<method name="get_model_n_mels" qualifiers="const">
			<return type="int" />
			<description>
				Gets the number of mel bands expected by the loaded model.
			</description>
		</method>
		<method name="get_model_n_text_ctx" qualifiers="const">
			<return type="int" />
			<description>
				Gets the model's text context size in tokens.
			</description>
		</method>
		<method name="get_model_n_text_head" qualifiers="const">
			<return type="int" />
			<description>
				Gets the number of text heads in the architecture of the loaded model.
			</description>
		</method>
		<method name="get_model_n_text_layer" qualifiers="const">
			<return type="int" />
			<description>
				Gets the number of text sequence layers in the architecture of the loaded model.
			</description>
		</method>
		<method name="get_model_n_text_state" qualifiers="const">
			<return type="int" />
			<description>
				Gets the number of text states built into the loaded model.
			</description>
		</method>
		<method name="get_model_n_vocab" qualifiers="const">
			<return type="int" />
			<description>
				Gets the size of the vocabulary for the loaded model context.
			</description>
		</method>
		<method name="get_model_type" qualifiers="const">
			<return type="int" />
			<description>
				Returns the internal enum constant representing the type/size configuration of the loaded Godot model.
			</description>
		</method>
		<method name="get_model_type_readable" qualifiers="const">
			<return type="String" />
			<description>
				Returns a human-readable string indicating the model's base configuration type, such as "tiny", "base", "small", "medium", or "large".
			</description>
		</method>
		<method name="get_sample_rate" qualifiers="static">
			<return type="int" />
			<description>
				Returns the constant sample rate expected by the whisper system, which is [code]16000[/code] Hz.
			</description>
		</method>
		<method name="get_segment" qualifiers="const">
			<return type="WhisperSegment" />
			<param index="0" name="index" type="int" />
			<description>
				Returns a specific [WhisperSegment] by its sequential [param index] from the last completed transcription.
			</description>
		</method>
		<method name="get_segment_count" qualifiers="const">
			<return type="int" />
			<description>
				Returns the total number of sequential text segments that were transcribed in the last pass.
			</description>
		</method>
		<method name="get_system_info" qualifiers="static">
			<return type="String" />
			<description>
				Returns a single string listing the system capabilities, active accelerators, and instruction sets that the local whisper.cpp binary is using on this machine.
			</description>
		</method>
		<method name="get_timings" qualifiers="const">
			<return type="Dictionary" />
			<description>
				Returns a dictionary filled with internal timing profiles detailing where time was spent during the last transcription task operations.
			</description>
		</method>
		<method name="get_version" qualifiers="static">
			<return type="String" />
			<description>
				Returns the version identification string for the compiled whisper.cpp backend.
			</description>
		</method>
		<method name="init">
			<return type="bool" />
			<description>
				Initializes the processing context using the provided config parameters and the data found in [member model]. Must be called before [method transcribe]. Returns true if successful.
			</description>
		</method>
		<method name="is_initialized" qualifiers="const">
			<return type="bool" />
			<description>
				Returns true if [method init] was called successfully and the instance is ready to execute a transcription task.
			</description>
		</method>
		<method name="is_multilingual" qualifiers="const">
			<return type="bool" />
			<description>
				Returns true if the currently loaded dictionary and context is capable of processing multi-language data, or false if it is an english-only model.
			</description>
		</method>
		<method name="print_timings" qualifiers="const">
			<return type="void" />
			<description>
				Prints accumulated system performance timing profile structures into standard Godot outputs.
			</description>
		</method>
		<method name="reset_timings">
			<return type="void" />
			<description>
				Resets the performance timers used when acquiring profile timestamps for [method print_timings].
			</description>
		</method>
		<method name="transcribe">
			<return type="int" />
			<param index="0" name="samples" type="PackedFloat32Array" />
			<description>
				Begins a synchronous block to process the raw PCM array [param samples]. Audio samples must be converted strictly to a monophonic 16000Hz format prior to passing. Returns a code signaling parsing errors, returning 0 on clear success.
			</description>
		</method>
		<method name="transcribe_parallel">
			<return type="int" />
			<param index="0" name="samples" type="PackedFloat32Array" />
			<param index="1" name="n_processors" type="int" />
			<description>
				Transcribes audio similarly to [method transcribe], but explicitly sets the transcription process pool to use [param n_processors] execution contexts specifically suited for multithread logic.
			</description>
		</method>
	</methods>
	<members>
		<member name="audio_ctx" type="int" setter="set_audio_ctx" getter="get_audio_ctx" default="0">
			The explicit context length parameter for audio frames. Leave at 0 to use the default specified directly by the context.
		</member>
		<member name="beam_patience" type="float" setter="set_beam_patience" getter="get_beam_patience" default="-1.0">
			Patience parameter when using the [constant BEAM_SEARCH] sampling strategy. A smaller value forces the model to stop sooner. Negative values leave it to default.
		</member>
		<member name="beam_size" type="int" setter="set_beam_size" getter="get_beam_size" default="5">
			The size parameter for the branch generation of the [constant BEAM_SEARCH] algorithmic tracking strategy.
		</member>
		<member name="carry_initial_prompt" type="bool" setter="set_carry_initial_prompt" getter="get_carry_initial_prompt" default="false">
			If [code]true[/code], passes the [member initial_prompt] between consecutive audio chunks continuously to provide strict contextual continuation.
		</member>
		<member name="debug_mode" type="bool" setter="set_debug_mode" getter="get_debug_mode" default="false">
			If enabled, logs extensive internal inference states directly into the debug build system standard console outputs.
		</member>
		<member name="detect_language" type="bool" setter="set_detect_language" getter="get_detect_language" default="false">
			If true, analyzes the very first samples passed to automatically deduce the spoken spoken idiom before actual token translation.
		</member>
		<member name="duration_ms" type="int" setter="set_duration_ms" getter="get_duration_ms" default="0">
			Sets the strict maximum duration boundary (in milliseconds) of text processing for samples provided to transcribe methods. A value of 0 ignores bounds.
		</member>
		<member name="entropy_thold" type="float" setter="set_entropy_thold" getter="get_entropy_thold" default="2.4">
			Fallback temperature entropy threshold. Above this confidence metric value the sampler resorts to triggering higher temperatures.
		</member>
		<member name="flash_attn" type="bool" setter="set_flash_attn" getter="get_flash_attn" default="true">
			Attempts to allocate the context algorithm states utilizing optimized flash-attention structures for accelerated GPU-driven generation operations.
		</member>
		<member name="gpu_device" type="int" setter="set_gpu_device" getter="get_gpu_device" default="0">
			Specifies the explicit index of the VRAM accelerator (GPU) to use for offloading computations.
		</member>
		<member name="greedy_best_of" type="int" setter="set_greedy_best_of" getter="get_greedy_best_of" default="5">
			Parameter indicating how many paths are compared simultaneously when applying the [constant GREEDY] inference strategy.
		</member>
		<member name="initial_prompt" type="String" setter="set_initial_prompt" getter="get_initial_prompt" default="&quot;&quot;">
			A text prompt manually injected before transcription starts to provide early contextual priming to the text generation algorithms (e.g. specialized terminology).
		</member>
		<member name="language" type="String" setter="set_language" getter="get_language" default="&quot;en&quot;">
			The short-string abbreviation of the target or source transcription language idiom (e.g., "en", "es", "auto"). Default is "en".
		</member>
		<member name="length_penalty" type="float" setter="set_length_penalty" getter="get_length_penalty" default="-1.0">
			Affects probability computations to penalize exceptionally long generation responses during beam searching procedures.
		</member>
		<member name="logprob_thold" type="float" setter="set_logprob_thold" getter="get_logprob_thold" default="-1.0">
			Lowest logarithmic likelihood the system is willing to process before fallback temperatures are introduced to stabilize generating context sequences.
		</member>
		<member name="max_initial_ts" type="float" setter="set_max_initial_ts" getter="get_max_initial_ts" default="1.0">
			Prevents the system from returning completely unpredictable initial offset markers before parsing actual audio occurrences.
		</member>
		<member name="max_len" type="int" setter="set_max_len" getter="get_max_len" default="0">
			Limits the strict physical buffer length available for a given transcription token sequence segment.
		</member>
		<member name="max_tokens" type="int" setter="set_max_tokens" getter="get_max_tokens" default="0">
			Restricts the hard count of distinct tokens to emit when passing blocks to the decoder layer per transcription task iteration.
		</member>
		<member name="model" type="WhisperModel" setter="set_model" getter="get_model">
			An instantiated [WhisperModel] class encapsulating the location of the `.bin` asset weight files. Needs resolving before utilizing the init sequences.
		</member>
		<member name="n_max_text_ctx" type="int" setter="set_n_max_text_ctx" getter="get_n_max_text_ctx" default="16384">
			Absolute count representing the max allowed context memory window reserved specifically for parsing and retaining token strings.
		</member>
		<member name="n_threads" type="int" setter="set_n_threads" getter="get_n_threads" default="4">
			Specifies the CPU worker thread count constraint when the backend allocates logic calculations over CPUs.
		</member>
		<member name="no_context" type="bool" setter="set_no_context" getter="get_no_context" default="false">
			When active, prevents the underlying generator from keeping knowledge buffers across subsequent execution steps inside a given sample.
		</member>
		<member name="no_speech_thold" type="float" setter="set_no_speech_thold" getter="get_no_speech_thold" default="0.6">
			Sets the tolerance boundary values for isolating whether specific audio data regions predominantly contain purely silent padding or static interference.
		</member>
		<member name="no_timestamps" type="bool" setter="set_no_timestamps" getter="get_no_timestamps" default="false">
			When toggled, prevents the underlying calculation steps entirely from computing physical runtime timestamp markers. Can marginally improve speed.
		</member>
		<member name="offset_ms" type="int" setter="set_offset_ms" getter="get_offset_ms" default="0">
			Explicit value controlling the millisecond offset distance representing where extraction loops should properly assume the PCM stream actually originated.
		</member>
		<member name="print_progress" type="bool" setter="set_print_progress" getter="get_print_progress" default="false">
			When enabled, forces the underlying C++ code logic to output tracking progress indicators immediately into stdout.
		</member>
		<member name="print_realtime" type="bool" setter="set_print_realtime" getter="get_print_realtime" default="false">
			When active, streams token completions straight off the generation loops incrementally into the stdout system handles during transcribe actions.
		</member>
		<member name="print_special" type="bool" setter="set_print_special" getter="get_print_special" default="false">
			If set, causes specialized token indicators (beginning of sequence, language ID tags) to appear visually inside extracted log paths.
		</member>
		<member name="print_timestamps" type="bool" setter="set_print_timestamps" getter="get_print_timestamps" default="true">
			Forces timestamp calculations to append distinct duration tag strings formatting inside standard output routines if any are configured.
		</member>
		<member name="single_segment" type="bool" setter="set_single_segment" getter="get_single_segment" default="false">
			Directs the parser logic to group the entirely analyzed results into exactly one physical chunk grouping rather than segmenting sequences on sentence closures.
		</member>
		<member name="split_on_word" type="bool" setter="set_split_on_word" getter="get_split_on_word" default="false">
			Instructs extraction routines to break distinct segment boundaries down further immediately adjacent to identifiable specific separated word tokenization boundaries.
		</member>
		<member name="strategy" type="int" setter="set_strategy" getter="get_strategy" enum="WhisperFull.Strategy" default="0">
			The selection enumerator that determines if sequences should utilize rapid simple [constant GREEDY] pathways or the heavier [constant BEAM_SEARCH] algorithm mapping logic.
		</member>
		<member name="suppress_blank" type="bool" setter="set_suppress_blank" getter="get_suppress_blank" default="true">
			Prohibits sequences composed purely of whitespace encoding chunks from dominating or intruding inside final generated outputs.
		</member>
		<member name="suppress_nst" type="bool" setter="set_suppress_nst" getter="get_suppress_nst" default="false">
			Forces suppression against non-speech tags, generally restricting arbitrary event or punctuation identifiers internally calculated.
		</member>
		<member name="suppress_regex" type="String" setter="set_suppress_regex" getter="get_suppress_regex" default="&quot;&quot;">
			An optional formatted PCRE-style formatting string defining conditions explicitly denying particular character emissions during translation passes.
		</member>
		<member name="tdrz_enable" type="bool" setter="set_tdrz_enable" getter="get_tdrz_enable" default="false">
			Configures tiny diarization modes identifying independent speaker switching locations during processing layers.
		</member>
		<member name="temperature" type="float" setter="set_temperature" getter="get_temperature" default="0.0">
			Root coefficient influencing sequence probabilities distributions. `0.0` translates mathematically strictly toward purely greedy predictable text matching pathways.
		</member>
		<member name="temperature_inc" type="float" setter="set_temperature_inc" getter="get_temperature_inc" default="0.2">
			Step interval amount the fall-back parameter increases if a specific parsing attempt falls beneath minimum criteria tracking markers.
		</member>
		<member name="thold_pt" type="float" setter="set_thold_pt" getter="get_thold_pt" default="0.01">
			Determines exact probability score boundaries at which specific individual text sequence values begin retaining their assigned duration metrics.
		</member>
		<member name="thold_ptsum" type="float" setter="set_thold_ptsum" getter="get_thold_ptsum" default="0.01">
			Summation condition constraint controlling probability factors tied to preserving accurate tracking tokens when extracting precise timing markers.
		</member>
		<member name="token_timestamps" type="bool" setter="set_token_timestamps" getter="get_token_timestamps" default="false">
			Requests extraction processing loops specifically calculate and preserve strict time coordinate details per exact word instead of roughly entire phrasing instances.
		</member>
		<member name="translate" type="bool" setter="set_translate" getter="get_translate" default="false">
			Directs the context states to attempt continuous localized grammar translations projecting native extraction values over into pure target English character outputs.
		</member>
		<member name="use_gpu" type="bool" setter="set_use_gpu" getter="get_use_gpu" default="true">
			Attempts allocating computing stages onto supported backend accelerator processors, heavily decreasing system processing requirements for local environments.
		</member>
		<member name="vad_enable" type="bool" setter="set_vad_enable" getter="get_vad_enable" default="false">
			Forces filtering procedures to utilize internal Voice Activity Detection to aggressively eliminate blank space portions from computations, saving operations.
		</member>
		<member name="vad_max_speech_duration_s" type="float" setter="set_vad_max_speech_duration_s" getter="get_vad_max_speech_duration_s" default="3.4028235e+38">
			Defines the extreme top physical cap value the Voice Activity engine will process consecutively ignoring internal pauses before concluding one chunk phrase block.
		</member>
		<member name="vad_min_silence_duration_ms" type="int" setter="set_vad_min_silence_duration_ms" getter="get_vad_min_silence_duration_ms" default="100">
			Lowest milliseconds interval threshold identifying distinct physical gaps needed effectively separating vocalized phrases according to the VAD subsystem.
		</member>
		<member name="vad_min_speech_duration_ms" type="int" setter="set_vad_min_speech_duration_ms" getter="get_vad_min_speech_duration_ms" default="250">
			Lowest milliseconds limitation identifying physical sound data correctly evaluated containing vocalized phrases inside the VAD detection module subsystem.
		</member>
		<member name="vad_model_path" type="String" setter="set_vad_model_path" getter="get_vad_model_path" default="&quot;&quot;">
			Specifies an explicit path toward an independently provided secondary `.onnx` silero-vad model instance utilized strictly by specialized internal VAD filtering functions.
		</member>
		<member name="vad_samples_overlap" type="float" setter="set_vad_samples_overlap" getter="get_vad_samples_overlap" default="0.1">
			Fractional constant assigning precisely the window scale overlapping percentage shared during sequenced detection scanning procedures mapping audio intervals.
		</member>
		<member name="vad_speech_pad_ms" type="int" setter="set_vad_speech_pad_ms" getter="get_vad_speech_pad_ms" default="30">
			Padding extension buffer added adjacent around boundaries separating VAD recognized phrase markers guarding audio cuts losing early syllable characters.
		</member>
		<member name="vad_threshold" type="float" setter="set_vad_threshold" getter="get_vad_threshold" default="0.5">
			Detection stringency boundary separating distinct VAD processing metrics when deciding whether an individual frame passes valid voice frequency constraints.
		</member>
	</members>
	<constants>
		<constant name="GREEDY" value="0" enum="Strategy">
			Utilizes simpler and faster sequence pathways focusing strictly on generating tokens sequentially using maximum predictability coefficients.
		</constant>
		<constant name="BEAM_SEARCH" value="1" enum="Strategy">
			Expends calculations on mapping out varied diverging sequence pathways across multiple alternatives selecting logically coherent string sequences overall.
		</constant>
	</constants>
</class>
